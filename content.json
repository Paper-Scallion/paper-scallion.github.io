{"meta":{"title":"纸葱de小站","subtitle":"来都来了，听首歌再走吧","description":"基于Hexo构建的博客","author":"Paper_Scallion","url":"https://paper-scallion.github.io","root":"/"},"pages":[{"title":"所有标签","date":"2022-10-29T15:19:33.047Z","updated":"2022-10-29T15:19:33.047Z","comments":true,"path":"tags/index.html","permalink":"https://paper-scallion.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2022-10-29T15:20:10.571Z","updated":"2022-10-29T15:20:10.571Z","comments":true,"path":"mylist/index.html","permalink":"https://paper-scallion.github.io/mylist/index.html","excerpt":"","text":""},{"title":"所有分类","date":"2022-10-29T15:18:04.936Z","updated":"2022-10-29T15:18:04.936Z","comments":true,"path":"categories/index.html","permalink":"https://paper-scallion.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2022-10-29T15:19:00.298Z","updated":"2022-10-29T15:19:00.298Z","comments":true,"path":"about/index.html","permalink":"https://paper-scallion.github.io/about/index.html","excerpt":"","text":"下面写关于自己的内容"}],"posts":[{"title":"倒立摆的建模仿真与控制（五）线性二次最优控制LQR控制实验","slug":"倒立摆的建模仿真与控制（五）线性二次最优控制LQR控制实验","date":"2022-10-27T14:48:00.000Z","updated":"2022-11-09T14:29:08.870Z","comments":true,"path":"posts/3d573b2a/","link":"","permalink":"https://paper-scallion.github.io/posts/3d573b2a/","excerpt":"LQR控制器，先设定成本函数，再由工程师设定加权，利用数学算法来找到使成本函数最小化的设定值。成本函数一般会定义为主要量测量（例如飞行高度或是制程温度）和理想值的偏差的和。算法会设法调整参数，让这些不希望出现的偏差降到最小。而控制量的大小本身也会包括在成本函数中。","text":"LQR控制器，先设定成本函数，再由工程师设定加权，利用数学算法来找到使成本函数最小化的设定值。成本函数一般会定义为主要量测量（例如飞行高度或是制程温度）和理想值的偏差的和。算法会设法调整参数，让这些不希望出现的偏差降到最小。而控制量的大小本身也会包括在成本函数中。 线性二次最优控制LQR控制实验 线性二次最优控制理论分析 线性二次最优控制\\(LQR\\)基本原理为，对于线性时不变系统，由系统方程： \\[ \\dot x(t)=A(t)x(t)+B(t)u(t) \\\\ y(t)=C(t)x(t)+D(t)u(t) \\\\ x(t_0)=x_0 \\] 确定下列最佳控制向量的矩阵\\(K\\)： \\[ u(t)=-K(t)x(t) \\] 使得性能指标达到最小值，即： \\[ J=\\frac{1}{2}x^T(t_f)Px(t_f)+\\frac{1}{2}\\int_{t_0}^{t_f}[x^T(t)Q(t)x(t)+u^T(t)R(t)u(t)]dt \\] 式中： \\(Q\\)：正定(或正半定)厄米特或实对称阵 R：为正定厄米特或实对称阵 终端时间有限时连续系统的状态调节器问题，要求寻找最优控制\\(u(t)\\)，使\\(J\\)最小。这里\\(u(t)\\)无约束。\\(P\\)、\\(Q(t)\\)为对称半正定阵，\\(R(t)\\)为对称正定阵。终端时间\\(t_f\\)为有限值。 因\\(u(t)\\)无约束，故等同于用经典变分法求解。取哈密顿函数为： \\[ H=\\frac{1}{2}[x(t)^TQ(t)x(t)+u^T(t)R(t)u(t)]+\\lambda^T(t)[A(t)x(t)+B(t)u(t)] \\] 最优解的必要条件如下： 协态方程为： \\[ \\dot \\lambda=-\\frac{\\partial H}{\\partial x}=-[Q(t)x(t)+A^T(t)\\lambda(t)] \\] 控制方程为： \\[ \\frac{\\partial H}{\\partial u}=R(t)u(t)+B^T(t)\\lambda(t)=0 \\\\ u=-R^{-1}(t)B^T(t)\\lambda(t) \\] 因\\(R(t)\\)正定，故\\(R^{-1}(t)\\)存在，由上式可确定最优控制\\(u(t)\\)。为寻求最优反馈控制律还需把\\(u(t)\\)与状态\\(x(t)\\)联系起来。 横截条件为： \\[ \\lambda(t_f)=\\frac{\\partial\\phi}{\\partial x(t_f)}=\\frac{\\partial}{\\partial x(t_f)}[\\frac{1}{2}x^T(t_f)Px(t_f)]=Px(t_f) \\] 再一次遇到了两点边值问题（已知\\(x(t_0)\\)和\\(\\lambda(t_f)\\)），如前所述，一般要试凑\\(\\lambda(t_0)\\)再积分协态方程使\\(\\lambda(t_f)\\)满足要求。 但这里处理的是线性微分方程，可找到更简单的解法。从可见，协态\\(\\lambda(t)\\)和状态\\(x(t)\\)在终端\\(t_f\\)时刻成线性关系。记\\(\\lambda(t)=K(t)x(t)\\)。 将线性关系代入横截条件方程得： \\[ [\\dot K(t)+K(t)A(t)-K(t)B(t)R^{-1}(t)B^T(t)K(t)+A^T(t)K(t)+Q(t)]x(t)=0 \\] 上式对任意\\(x(t)\\)都应成立，故方括号内的项应为零，这就得出： \\[ \\dot K(t)=-K(t)A(t)-A^T(t)K(t)+K(t)B(t)R^{-1}(t)B^T(t)K(t)-Q(t) \\] 再根据线性关系： \\[ \\lambda(t)=K(t)x(t) \\\\ \\dot x(t)=A(t)x(t)-B(t)R^{-1}(t)B^T(t)K(t)x(t)\\\\ \\dot\\lambda(t)=\\dot K(t)x(t)+K(t)\\dot x(t)=-Q(t)x(t)-A^T(t)K(t)x(t)\\\\ K(t_f)=P \\] 得到K满足含上述终值条件的如下\\(Riccati\\)方程： \\[ \\dot K(t)=-K(t)-A^T(t)K(t)+K(t)B(t)R^{-1}(t)B^T(t)K(t)-Q(t) \\] 上式是\\(K(t)\\)的非线性矩阵微分方程，称为黎卡提（\\(Riccati\\)）矩阵微分方程。一般来说得不出\\(K(t)\\)的解析表达式，但可用计算机程序算出\\(K(t)\\)的数值解。为了求解，要知道它的边界条件\\(K(t_f)=P\\)。 因此可从\\(t_f\\)到\\(t_0\\)逆时间积分黎卡提微分方程，求出\\(K(t)\\)。可构成最优反馈控制： \\[ u(t)=-R^{-1}(t)B^T(t)K(t)X(t)=-G(t)x(t) \\] 其中，\\(G(t)=R^{-1}(t)B^T(t)K(t)\\)，又称为最优反馈增益矩阵。 即使系统是定常的，即系统矩阵\\(A\\)，输入矩阵\\(B\\)为常数阵，加权阵\\(R\\)和\\(Q\\)也是常数阵，但\\(K(t)\\)仍为时变阵。 这从\\(K(t)\\)是黎卡提微分方程的解可看出。K(t)$时变时，反馈控制增益也时变，在实现时总是不太方便。 对线性定常系统，若终端时间\\(t_f\\rightarrow\\infty\\)，且系统满足一些附加条件时，\\(K(t)\\)将变为常数阵\\(K\\)。 线性定常系统： \\[ \\dot x(t)=Ax(t)+Bu(t) \\] \\(x\\)为\\(n\\)维，\\(u\\)为\\(m\\)维，系统是可控的或至少是可稳的（可稳指不可控的状态是渐近稳定的）。性能指标为： \\[ J=\\frac{1}{2}\\int_{0}^{\\infty}[x(t)^TQx(t)+u(t)^TRu(t)]dt \\] 其中\\(u(t)\\)不受约束，\\(Q\\)和\\(R\\)为常数对称正定阵。或者可将对\\(Q\\)的要求改为对称半正定，\\((A,Q_1)\\)可观测，或至少可检测（可检测指不可观测的状态是渐近稳定的），\\(Q_1\\)是\\(Q\\)的矩阵平方根。 已经证明了：使\\(J\\)为极小的最优控制是存在和唯一的，且可表示为： \\[ u(t)=-R^{-1}B^TKx(t)=-Gx(t) \\] LQR控制参数调节及仿真 前面已经得到了直线一级倒立摆系统的系统状态方程： \\[ \\begin{bmatrix} \\dot x \\\\ \\ddot x \\\\ \\dot\\phi \\\\ \\ddot\\phi \\\\ \\end{bmatrix} = \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; 0 &amp; 29.4 &amp; 0\\\\ \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix} + \\begin{bmatrix} 0 \\\\ 1 \\\\ 0 \\\\ 3 \\\\ \\end{bmatrix} u \\] \\[ y= \\begin{bmatrix} x \\\\ \\phi \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix} \\] 假设全状态反馈可以实现（四个状态量都可测），找出确定反馈控制规律的向量\\(K\\)。在\\(MATLAB\\)中得到最优控制器对应的\\(K\\)。\\(LQR\\)函数允许你选择两个参数——\\(R\\)和\\(Q\\)，这两个参数用来平衡输入量和状态量的权重。最简单的情况是假设\\(R=1\\)，\\(Q=C^′C\\)。当然，也可以通过改变\\(Q\\)矩阵中的非零元素来调节控制器以得到期望的响应。 取： \\[ Q= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\end{bmatrix} , R=1 \\] 其中，\\(Q_{1,1}\\)代表小车位置的权重，而\\(Q_{3,3}\\)是摆杆角度的权重。使用\\(Matlab\\)语句如下： 1234567891011121314A=[0 1 0 0; 0 0 0 0; 0 0 0 1; 0 0 29.4 0];B=[0 1 0 3]&#x27;;C=[1 0 0 0; 0 0 1 0];D=[0 0]&#x27;;Q=[1000 0 0 0; 0 0 0 0; 0 0 200 0; 0 0 0 0];R=1;K=lqr(A,B,Q,R) 得到控制矩阵： \\[ K= \\begin{bmatrix} -31.6228 &amp; -20.1507 &amp; 72.7181 &amp; 13.1552 \\end{bmatrix} \\]","categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]},{"title":"倒立摆的建模仿真与控制（四）PID和极点配置实验","slug":"倒立摆的建模仿真与控制（四）PID和极点配置实验","date":"2022-10-25T14:37:00.000Z","updated":"2022-11-09T14:29:08.873Z","comments":true,"path":"posts/9fb7a45/","link":"","permalink":"https://paper-scallion.github.io/posts/9fb7a45/","excerpt":"经典控制理论的研究对象主要是单输入单输出的系统，控制器设计时一般需要有关被控对象的较精确模型。PID 控制器因其结构简单，容易调节，且不需要对系统建立精确的模型，在控制上应用较广。 经典控制理论的研究对象主要是单输入单输出的系统，控制器设计时一般需要有关被控对象的较精确模型，现代控制理论主要是依据现代数学工具，将经典控制理论的概念扩展到多输入多输出系统。极点配置法通过设计状态反馈控制器将多变量系统的闭环系统极点配置在期望的位置上，从而使系统满足瞬态和稳态性能指标。","text":"经典控制理论的研究对象主要是单输入单输出的系统，控制器设计时一般需要有关被控对象的较精确模型。PID 控制器因其结构简单，容易调节，且不需要对系统建立精确的模型，在控制上应用较广。 经典控制理论的研究对象主要是单输入单输出的系统，控制器设计时一般需要有关被控对象的较精确模型，现代控制理论主要是依据现代数学工具，将经典控制理论的概念扩展到多输入多输出系统。极点配置法通过设计状态反馈控制器将多变量系统的闭环系统极点配置在期望的位置上，从而使系统满足瞬态和稳态性能指标。 PID和极点配置实验 直线一级倒立摆 PID 控制实验 PID控制器原理 PID控制器的传递函数为： \\[ KD(s)=K_Ds+Kp+\\frac{K_I}{s}=\\frac{K_Ds^2+K_Ps+K_I}{s} \\] 通过分析PID控制器的传递函数与被控对象的传递函数，就可以得到系统的各项性能指标。 在实际当中，需要仔细调节PID控制器的参数，以便达到满意的控制效果。 PID 控制参数设定及仿真 在Simulink中搭建如下模型： 此时相当于无控制器，阶跃响应曲线不收敛。 逐渐增大控制量\\(K_P=40\\)，系统由发散逐步转为等幅振荡，增大\\(K_P\\)，震荡频率增加，同时震荡幅度减小。 \\(K_P=40,K_I=0,K_D=0\\)时的阶跃响应曲线如下图所示： 逐步增大控制量\\(K_D\\)，系统震荡逐步减小，同时到稳定时所经历的震荡周期个数减小。\\(K_D\\)过小时，系统震荡较为严重，达到稳态的时间较长；\\(K_D\\)过大时，系统震荡减缓，但上升时间变慢，达到稳态的时间同样会加长。最终选定\\(K_D=5.7\\)，上升速度足够快的同时，震荡极小，调节时间也令人满意。 \\(K_P=40,K_I=0,K_D=5.7\\)时的阶跃响应曲线如下图所示： 为了最终消除稳态误差，需要引入积分控制。 逐渐增大控制量\\(K_I\\)，稳态误差趋于\\(0\\)的速度也逐渐增加，但随着\\(K_I\\)的增大，系统的超调量也逐渐增大，因此最终选定\\(K_I=40\\)，此时稳态误差几乎为\\(0\\)，调节时间\\(t_s=2.133s(2\\%)\\)，超调量\\(\\sigma\\%=40.9%\\)。 \\(K_P=40,K_I=40,K_D=5.7\\)时的阶跃响应曲线如下图所示： 此时观察小车位置的变化曲线如下： 可以看出，由于PID控制器为单输入单输出系统，所以只能控制摆杆的角度，并不能控制小车的位置，所以小车会往一个方向运动。 状态空间极点配置控制实验 经典控制理论的研究对象主要是单输入单输出的系统，控制器设计时一般需要有关被控对象的较精确模型，现代控制理论主要是依据现代数学工具，将经典控制理论的概念扩展到多输入多输出系统，即建立系统的状态空间表达。极点配置法通过设计状态反馈控制器将多变量系统的闭环系统极点配置在期望的位置上，从而使系统满足瞬态和稳态性能指标。前面我们已经得到了倒立摆系统的比较精确的动力学模型，下面我们针对直线型一级倒立摆系统应用极点配置法设计控制器。 状态空间分析 对于控制系统： \\[ \\dot x=Ax+Bu \\] 式中 \\(x\\)为状态向量（\\(n\\)维列向量） \\(u\\)为控制向量（纯量） \\(A\\)为\\(n\\times n\\)维常数矩阵 \\(B\\)为\\(n\\times1\\)维常数矩阵 选择控制信号为： \\[ u=-Kx \\] 求解得： \\[ \\dot x=(A-BK)x \\] 方程的时域解为： \\[ x(t)=e^{(A-BK)t}x(0) \\] 可以看出，如果系统状态完全可控，\\(K\\)选择适当，对于任意的初始状态，当\\(t\\)趋于无穷时，都可以使\\(x(t)\\)趋于\\(0\\)。 极点配置设计步骤 方法一： 检验系统可控性。 计算特征值：根据根据要求，并留有一定的裕量（设调整时间为 2 秒），取阻尼比为最佳阻尼比即\\(\\zeta=\\frac{\\sqrt 2}{2}\\approx0.707107\\)。 再由调节时间： \\[ t_s=\\frac{4}{\\zeta\\omega_n}\\le2 \\ (2\\%) \\] 解得固有频率\\(\\omega_n\\ge2.8284rad/s\\)，取固有频率\\(\\omega_n=3 \\ rad/s\\)。 则期望闭环极点为\\(\\lambda_1=-3+3j,\\lambda_2=-3-3j\\)，另外两个闭环极点位于\\(\\lambda_1\\)和\\(\\lambda_2\\)的左边，且距离虚轴更远，因此\\(\\lambda_1\\)和\\(\\lambda_2\\)作为主导闭环极点，其余闭环极点对系统响应影响较小，可取\\(\\lambda_3=-10,\\lambda_4=-10\\)，因此期望的特征方程为： \\[ \\begin{align} (s-\\lambda_1)(s-\\lambda_2)(s-\\lambda_3)(s-\\lambda_4)&amp;=(s+3-3j)(s+3+3j)(s+10)(s+10)\\notag \\\\ &amp;=s^4+26s^3+283s^2+960s+1800\\notag \\end{align} \\] 因此可得： \\[ \\beta_1=26,\\beta_2=283,\\beta_3=960,\\beta_4=1800 \\] 由系统特征方程： \\[ \\begin{align} |sI-A|&amp;= \\left |\\begin{array}{} s &amp; -1 &amp; 0 &amp; 0 \\\\ 0 &amp; s &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; s &amp; -1 \\\\ 0 &amp; 0 &amp; -29.4 &amp; s \\end{array}\\right|\\notag \\\\ &amp;=s^4-29.4s^2\\notag \\end{align} \\] 因此可得： \\[ \\alpha_1=0,\\alpha_2=-29.2,\\alpha_3=0,\\alpha_4=0 \\] 系统的反馈增益阵为： \\[ K= \\begin{bmatrix} \\beta_4-\\alpha_4 &amp; \\beta_3-\\alpha_3 &amp; \\beta_2-\\alpha_2 &amp; \\beta_1-\\alpha_1 \\end{bmatrix} \\times P \\] 确定使状态方程变为可控标准型的变换矩阵\\(P\\) \\[ P= \\begin{bmatrix} -0.034 &amp; 0 &amp; 0.0113 &amp; 0 \\\\ 0 &amp; -0.034 &amp; 0 &amp; 0.0113 \\\\ 0 &amp; 0 &amp; 0.3333 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0.3333 \\end{bmatrix} \\] 状态反馈增益矩阵\\(K\\)为： \\[ \\begin{align} K&amp;= \\begin{bmatrix} \\beta_4-\\alpha_4 &amp; \\beta_3-\\alpha_3 &amp; \\beta_2-\\alpha_2 &amp; \\beta_1-\\alpha_1 \\end{bmatrix} \\times P\\notag \\\\ &amp;= \\begin{bmatrix} 1800 &amp; 960 &amp; 312.4 &amp; 26 \\end{bmatrix} \\times \\begin{bmatrix} -0.034 &amp; 0 &amp; 0.0113 &amp; 0 \\\\ 0 &amp; -0.034 &amp; 0 &amp; 0.0113 \\\\ 0 &amp; 0 &amp; 0.3333 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0.3333 \\end{bmatrix}\\notag \\\\ &amp;= \\begin{bmatrix} -61.2245&amp; -32.6531 &amp; 109.5415 &amp; 19.5510 \\end{bmatrix}\\notag \\end{align} \\] 方法二： 设反馈增益矩阵\\(K\\)为： \\[ K=\\begin{bmatrix} k_1 &amp; k_2 &amp; k_3 &amp; k_4 \\end{bmatrix} \\] 矩阵\\((A-BK)\\)的特征值是方程式\\(|sI-(A-BK)|=0\\)的根： 即特征的多项式： \\[ s^4+(k_2+3k_4)s^3+(-29.4+k_1+3k_3)s^2-29.4k_2s-29.4k_1=0 \\] 与期望特征多项式比较： \\[ s^4+26s^3+283s^2+960s+1800=0 \\] 使得对应项系数相同，可以列方程组，并通过解方程组也可以求出反馈增益矩阵\\(K\\)，最终结果与方法一求解相同。 位置\\(x\\)响应曲线如下图所示： 加速度\\(\\dot x\\)响应曲线如下图所示： 摆角\\(\\phi\\)响应曲线如下图所示： 摆角加速度\\(\\dot\\phi\\)响应曲线如下图所示：","categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]},{"title":"倒立摆的建模仿真与控制（三）根轨迹和频率响应实验","slug":"倒立摆的建模仿真与控制（三）根轨迹和频率响应实验","date":"2022-10-14T02:29:00.000Z","updated":"2022-11-09T14:29:08.860Z","comments":true,"path":"posts/b092f074/","link":"","permalink":"https://paper-scallion.github.io/posts/b092f074/","excerpt":"根轨迹图反映了闭环特征根随\\(K_r\\)变化的规律，而闭环特征方程的根与系统的性能关系密切。通过根轨迹来分析系统的性能具有直观、方便的特点。 频率特性法是通过系统的开环频率特性的频域性能指标间接地表征系统瞬态响应的性能。系统性能的分析过程。","text":"根轨迹图反映了闭环特征根随\\(K_r\\)变化的规律，而闭环特征方程的根与系统的性能关系密切。通过根轨迹来分析系统的性能具有直观、方便的特点。 频率特性法是通过系统的开环频率特性的频域性能指标间接地表征系统瞬态响应的性能。系统性能的分析过程。 根轨迹和频率响应实验 直线一级倒立摆根轨迹控制实验 根轨迹分析 根据《倒立摆的建模仿真与控制（一）倒立摆系统的建模》中的传递函数模型，将以下实际系统参数代入： 小车质量\\(M=1.096kg\\) 摆杆质量\\(m=0.109kg\\) 小车摩擦系数\\(b=0.1N\\cdot s/m\\) 摆杆转动轴心到杆质心的长度\\(l=0.25m\\) 摆杆惯量\\(I=0.0034kg\\cdot m^2\\) 得到摆杆角度和小车加速度之间的传递函数为： \\[ G(s)=\\frac{\\Phi(s)}{V(s)}=\\frac{ml}{(I+ml^2)s^2-mgl}=\\frac{0.02725}{0.0102125s^2-0.26705} \\] 在MATLAB中运行以下脚本： 12345678close all;clear all;num=[0.02725]; den=[0.0102125 0 -0.26705];z=roots(num)p=roots(den)figure(1)rlocus(num,den) 得到结果如下： 12345z = 空的 0×1 double 列向量p = 5.1136 -5.1136 可以看出，系统有两个零点，有两个极点，并且有一个极点为正。 绘制的系统根轨迹如下图所示： 可以看出闭环传递函数的一个极点位于右半平面，并且有一条根轨迹起始于该极点，并沿着实轴向左跑到位于原点的零点处，这意味着无论增益如何变化，这条根轨迹总是位于右半平面，即系统总是不稳定的。 根轨迹校正及仿真 对于该系统，设计控制器，使得使得校正后系统的要求如下： 调整时间\\(t_s=0.5s(2\\%)\\) 最大超调量\\(M_p\\le10\\%\\) 根轨迹设计步骤如下： 确定闭环期望极点\\(s_d\\)的位置，由最大超调量 \\[ M_p=e^{-\\frac{\\pi\\zeta}{\\sqrt{1-\\zeta^2}}}\\times100\\%\\le10\\% \\] 解得阻尼比\\(\\zeta\\ge0.591155\\)，为使系统振荡幅度小，取阻尼比\\(\\zeta=0.9\\)。 由\\(\\zeta=\\cos \\theta\\)解得\\(\\theta=0.4510\\)。（其中\\(\\theta\\)为位于第二象限的极点和\\(O\\)点的连线与实轴负方向的夹角） 又由： \\[ t_s=\\frac{4}{\\zeta\\omega_n}\\le0.5 \\ (2\\%) \\] 解得固有频率\\(\\omega_n\\ge8.8889rad/s\\)，取固有频率\\(\\omega_n=11.5 \\ rad/s\\)。 期望闭环极点： \\[ p_{1,2}=\\omega_n(-\\cos\\theta\\pm j\\sin\\theta)=-10.3500\\pm5.0127j \\] 未校正系统的根轨迹在实轴和虚轴上，不通过闭环期望极点，因此需要引入新的零极点，对系统进行校正，使得根轨迹通过期望闭环极点，设超前校正控制器为： \\[ K(s)=\\alpha\\frac{Ts+1}{\\alpha Ts+1}=\\frac{s-z_c}{s-p_c} \\ (a\\le1) \\] 计算超前校正装置应提供的相角，已知根轨迹上点满足相角方程： \\[ \\angle G(s_0)+\\angle K(s_0)=(2k+1)\\pi \\] 则有： \\[ \\phi_c=\\angle K(s)=(2k+1)\\pi-\\angle G(s_0) \\] 取点\\(s_0=-10.3500+5.0127j\\)，则有： \\[ \\begin{align} \\angle G(s_0)&amp;=-[\\pi-\\tan^{-1}(\\frac{\\omega_n\\sin\\theta}{\\omega_n\\cos\\theta-5.1136})]-[\\pi-\\tan^{-1}(\\frac{\\omega_n\\sin\\theta}{\\omega_n\\cos\\theta+5.1136})]\\notag \\\\ &amp;=-5.2061\\notag \\end{align} \\] 则： \\[ \\begin{align} \\phi_c&amp;=(2k+1)\\pi-\\angle G(s_0)\\notag \\\\ &amp;=(2k+1)\\pi-(-5.2061)\\notag \\\\ &amp;=2.0645\\notag \\end{align} \\] 其中\\(k=-1\\)。 设计超前校正装置： \\[ \\gamma=\\frac12(\\pi-\\theta-\\phi_c)=0.3130 \\] 各角度示意图如下： 则超前校正装置零点： \\[ z_c=-[\\omega_n\\cos\\theta-\\omega_n\\sin\\theta\\tan(\\frac{\\pi}{4}-\\gamma)]=-5.1185 \\] 超前校正装置极点： \\[ p_c=-(\\omega_n\\cos\\theta+\\omega_n\\sin\\theta\\cot\\gamma)=-25.8379 \\] 校正装置的零极点相对位置如下图所示： 校正后开环传递函数： \\[ Q(s)=G(s)K(s)=K\\frac{s+5.1185}{s+25.8379}\\frac{0.02725}{0.0102125s^2-0.26705} \\] 由幅值条件\\(|G(s_0)K(s_0)|=1\\)，并设反馈为单位负反馈，解得\\(K=99.2219\\)。 最终系统控制器为： \\[ K(s)=\\frac{99.2219(s+5.1185)}{s+25.8379} \\] 校正后系统根轨迹如下图所示： 闭环系统的阶跃响应曲线如下图所示： 闭环系统的脉冲响应曲线如下图所示： 直线一级倒立摆频率响应控制实验 频率响应分析 根据《倒立摆的建模仿真与控制（一）倒立摆系统的建模》中的传递函数模型，得到摆杆角度和小车加速度之间的传递函数为： \\[ G(s)=\\frac{\\Phi(s)}{V(s)}=\\frac{0.02725}{0.0102125s^2-0.26705} \\] 在\\(MATLAB\\)下绘制系统的\\(Bode\\)图和\\(Nyquist\\)图。 在\\(MATLAB\\)中运行以下脚本： 12345678910num=[0.02725];den=[0.0102125 0 -0.26705];z=roots(num)p=roots(den)subplot(2,1,1)bode(num,den)subplot(2,1,2)nyquist(num,den)xlim([-0.15,0]) 得到结果如下： 12345z = 空的 0×1 double 列向量p = 5.1136 -5.1136 系统的的\\(Bode\\)图如下： 系统的的\\(Nyquist\\)图如下： 可以得到，系统没有零点，但存在两个极点，其中一个极点位于右半\\(S\\)平面，根据奈奎斯特稳定判据，闭环系统稳定的充分必要条件是：当\\(\\omega\\)从\\(-\\infty\\)到\\(+\\infty\\)变化时，开环传递函数\\(G(j\\omega)\\)沿逆时针方向包围\\((-1,0)\\)点\\(p\\)圈，其中\\(p\\)为开环传递函数在右半\\(S\\)平面内的极点数。对于直线一级倒立摆，由上图我们可以看出，开环传递函数在\\(S\\)右半平面有一个极点，因此\\(G(j\\omega)\\)需要沿逆时针方向包围\\((-1,0)\\)点\\(1\\)圈，可以看出，系统的Nyquist图并没有逆时针绕\\((-1,0)\\)点\\(1\\)圈，因此系统不稳定，需要设计控制器来镇定系统。 超前校正的设计 稳态位置误差常数为\\(10\\) 相位裕量为\\(50^\\circ\\) 增益裕量\\(\\ge10 \\ dB\\) 控制器设计步骤如下： 选择控制器，上面我们已经得到了系统的 Bode 图，可以看出，给系统增加一个超前校正就可以满足设计要求，设超前校正装置为： \\[ K(s)=\\frac{1+\\alpha Ts}{1+Ts}=\\alpha\\frac{\\frac{1}{\\alpha T}+s}{\\frac{1}{T}+s} \\] 已校正系统具有开环传递函数\\(K_cK(s)G(s)\\) 设： \\[ G_1(s)=K_cG(s)=\\frac{0.02725K_c}{0.0102125s^2-0.26705} \\] 2. 根据稳态误差要求计算增益\\(K_c\\)： \\[ K_p=\\lim_{s\\to0}K_cK(s)G(s)=\\lim_{s\\to0}K_c\\frac{1+\\alpha Ts}{1+Ts}\\times\\frac{0.02725}{0.0102125s^2-0.26705}=10 \\] 可以得到： \\[ K_c=98 \\] 于是有： \\[ G_1(s)=-\\frac{0.02725\\times98}{0.0102125s^2-0.26705} \\] 在\\(MATLAB\\)中画出\\(G_1(s)\\)的\\(Bode\\)图如下： \\(Nyquist\\)图如下： 可以看出，系统的相位裕量为\\(0^\\circ\\)，根据设计要求，系统的相位裕量为\\(50^\\circ\\)，因此需要增加的相位裕量为\\(50^\\circ\\)，增加超前校正装置会改变Bode图的幅值曲线，这时增益交界频率会向右移动，必须对增益交界频率增加所造成的\\(G_1(j\\omega)\\)的相位滞后增量进行补偿，因此，假设需要的最大相位超前量\\(\\phi_m\\)近似等于\\(55^\\circ\\)。 根据： \\[ \\sin\\phi_m=\\frac{\\alpha-1}{\\alpha+1} \\] 计算得到：\\(\\alpha=10.0590\\) 此时\\(\\phi_m\\)所对应增加幅值为： \\[ 10\\lg a=10.0256 \\ dB \\] 并且\\(|G_1(j\\omega_c)|=-10.0261 \\ dB\\)，即： \\[ |G_1(j\\omega_c)|=|-\\frac{0.02725\\times98}{-0.0102125\\omega_c^2-0.26705}|=10^{-\\frac{10.0256}{20}} \\] 解得：\\(\\omega_c=28.3409 \\ rad/s\\) 再根据超前校正： \\[ \\omega_c=\\frac{1}{\\sqrt{a}T} \\] 解得：\\(\\frac{1}{T}=89.8857\\)，\\(\\frac{1}{\\alpha T}=8.9359\\) 校正装置可以确定为： \\[ \\begin{align} K(s)&amp;=\\alpha\\frac{\\frac{1}{\\alpha T}+s}{\\frac{1}{T}+s}\\notag \\\\ &amp;=10.0590\\frac{s+8.9359}{s+89.8857}\\notag \\end{align} \\] 且\\(K_c=98\\) 校正后的开环传递函数为： \\[ K_cK(s)G(s)=98\\times10.0590\\frac{s+8.9359}{s+89.8857}\\times\\frac{0.02725}{0.0102125s^2-0.26705} \\] 增加校正后系统的\\(Bode\\)图如下： \\(Nyquist\\)图如下： 根轨迹图如下： 观察\\(Bode\\)图可知，校正后的相位裕度为\\(55.8^\\circ\\)，达到要求的\\(50^\\circ\\) 系统的阶跃响应曲线如下： 系统的稳态值为\\(1.12\\)，稳态误差大于\\(0.1\\)，未满足题设要求，超调量\\(\\sigma\\%=13.39\\%\\)，调节时间\\(t_s=0.324s\\)。 系统的冲激响应曲线如下： 可以看到，系统在遇到干扰后，可以在\\(0.4s\\)内达到新的平衡，但是震荡幅度较大。 滞后-超前校正的设计 超前校正虽然使得系统迅速达到了平衡，但存在稳态误差，同时震荡幅度较大，因此需要引入滞后校正来改善系统响应，使得在稳态精度、快速性和震荡性达到较好的平衡。 控制器设计步骤如下： 设滞后-超前校正装置为： \\[ K(s)=\\frac{(1+T_bs)(1+T_as)}{(1+\\alpha T_bs)(1+\\alpha^{-1}T_as)} \\] 已校正系统具有开环传递函数\\(K_cG(s)K(s)\\) 根据稳态误差要求计算增益\\(K_c\\)，为减小稳态误差，故选取更大的稳态位置误差常数\\(K_p\\)： \\[ K_p=\\lim_{s\\to0}K_cK(s)G(s)=\\lim_{s\\to0}K_c\\frac{(1+T_bs)(1+T_as)}{(1+\\alpha T_bs)(1+\\alpha^{-1}T_as)}\\times\\frac{0.02725}{0.0102125s^2-0.26705}=100 \\] 可以得到： \\[ K_c=980 \\] 根据： \\[ \\sin\\phi_m=\\frac{\\alpha-1}{\\alpha+1} \\] 取\\(\\phi_m=55^\\circ\\)，计算得到：\\(\\alpha=10.0590\\) 根据取截止频率\\(\\omega_c=28 \\ rad/s\\)，并且设\\(T_a=0.1107\\)，有： \\[ 20\\lg K_c+20\\lg|G(j\\omega_c)|+20\\lg|\\frac{1+T_bj\\omega_c}{1+\\alpha T_bj\\omega_c}|+20\\lg|\\frac{1+T_a j\\omega_c}{1+\\alpha^{-1} T_aj\\omega_c}|=0 \\] 解得：\\(T_b=0.7054\\) 最终滞后-超前控制器为： \\[ K(s)=\\frac{(0.7054s+1)(0.1107s+1)}{(7.0956s+1)(1.1005\\times10^{-2} s+1)} \\] 且\\(K_c=980\\) 校正后的开环传递函数为： \\[ K_cK(s)G(s)=980\\times\\frac{(0.7054s+1)(0.1107s+1)}{(7.0956s+1)(1.1005\\times10^{-2} s+1)}\\times\\frac{0.02725}{0.0102125s^2-0.26705} \\] 增加校正后系统的\\(Bode\\)图如下： \\(Nyquist\\)图如下： 根轨迹图如下： 观察\\(Bode\\)图可知，校正后的相位裕度为\\(52.4^\\circ\\)，达到要求的\\(50^\\circ\\)，增益裕量为\\(17.7dB\\)，达到要求的\\(10dB\\) 系统的阶跃响应曲线如下： 系统的稳态值为\\(1.01\\)，稳态误差小于\\(0.1\\)，满足题设要求，超调量\\(\\sigma\\%=30.69\\%\\)，调节时间\\(t_s=0.96s\\)。 系统的冲激响应曲线如下： 可以看到，系统在遇到干扰后，可以在\\(0.4s\\)内达到新的平衡，但是振荡幅度较大。","categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]},{"title":"倒立摆的建模仿真与控制（二）编码器的原理及使用以及电机控制","slug":"倒立摆的建模仿真与控制（二）编码器的原理及使用以及电机控制","date":"2022-10-13T06:19:00.000Z","updated":"2022-11-09T14:29:08.866Z","comments":true,"path":"posts/6b2f65a4/","link":"","permalink":"https://paper-scallion.github.io/posts/6b2f65a4/","excerpt":"本实验的目的是让实验者熟悉角度编码器的基本原理，掌握利用计算机和运动控制卡对编码器进行数据采集的方法，以及利用计算机对电机进行控制的基本原理和方法，了解机电一体化的两个重要内容：传感技术和运动控制技术。以便顺利的完成倒立摆的各项实验。","text":"本实验的目的是让实验者熟悉角度编码器的基本原理，掌握利用计算机和运动控制卡对编码器进行数据采集的方法，以及利用计算机对电机进行控制的基本原理和方法，了解机电一体化的两个重要内容：传感技术和运动控制技术。以便顺利的完成倒立摆的各项实验。 编码器原理及使用实验 编码器原理 旋转编码器是一种角位移传感器，它分为光电式、接触式和电磁感应式三种，其中光电式脉冲编码器是闭环控制系统中最常用的位置传感器。 旋转编码器有增量编码器和绝对编码器两种，上图为光电式增量编码器示意图，它由发光元件、光电码盘、光敏元件和信号处理电路组成。当码盘随工作轴一起转动时，光源透过光电码盘上的光栏板形成忽明忽暗的光信号，光敏元件把光信号转换成电信号，然后通过信号处理电路的整形、放大、分频、记数、译码后输出。为了测量出转向，使光栏板的两个狭缝比码盘两个狭缝距离小\\(\\frac{1}{4}\\)节距，这样两个光敏元件的输出信号就相差\\(\\frac{\\pi}{2}\\)相位，将输出信号送入鉴向电路，即可判断码盘的旋转方向。 光电式增量编码器的测量精度取决于它所能分辨的最小角度\\(\\alpha\\)(分辨角、分辨率)，而这与码盘圆周内所分狭缝的线数有关。 \\[ \\alpha=\\frac{360^\\circ}{n} \\] 其中\\(n\\)为编码器线数。 由于光电式脉冲编码盘每转过一个分辨角就发出一个脉冲信号，因此，根据脉冲数目可得出工作轴的回转角度，由传动比换算出直线位移距离；根据脉冲频率可得工作轴的转速；根据光栏板上两条狭缝中信号的相位先后，可判断光电码盘的正、反转。 绝对编码器通过与位数相对应的发光二极管和光敏二极管对输出的二进制码来检测旋转角度。 与增量编码器原理相同，用于测量直线位移的传感器是光栅尺。 由于光电编码器输出的检测信号是数字信号，因此可以直接进入计算机进行处理，不需放大和转换等过程，使用非常方便，因此应用越来越广泛。 角度换算 对于线数为\\(n\\)的编码器，设信号采集卡倍频数为\\(m\\)，则有角度换算关系为： \\[ \\phi=\\frac{2\\pi}{nm}N(rad) \\ or \\ \\phi=\\frac{360^\\circ}{nm}N(degree) \\] 式中\\(\\phi\\)为编码器轴转角，\\(N\\)为编码器读数。 对于电机编码器，在倒立摆使用中需要把编码器读数转化为小车的水平位置，以下转换关系： \\[ l=\\frac{\\pi\\Phi}{nm}N \\] 式中\\(l\\)为小车位移，\\(\\Phi\\)为同步带轮直径。 Matlab Simulink 环境下的实验 仿真设置 仿真模式由Normal改为External模式。 仿真结束时间(Stop time)改为inf(无限长)。 求解器(Solver)选择为定步长(Fixed-step)，仿真间隔(Fixed step size)改为0.005s。 在Real-Time Workshop中的配置(Configuration)选择系统目标文件(System target file)为rtwin.tlc。 实验一 摆杆角度检测实验 新建\\(Simulink\\)项目，按照仿真设置当中将对各项参数进行设置。 打开“Googol Education Products-SV Block Library”。 在“Get Current Axis’s Position”上点击鼠标左键并将模块拉到（以下简称为“拉”）刚才新建的窗口中。 双击“GetPos”模块，打开设置窗口，并选择轴号为“2”，即第一级摆杆连接的编码器，此编码器固定于小车上。 从“Simulink”中拉一个“Scope”到窗口中。 连接两个模块（移动鼠标到“&lt;“上，鼠标箭头变成“＋”，按下鼠标 左键并移动到“&gt;”上，松开鼠标）。 在“Googol Education Products-SV Block Library”中拉一个“GT400-SV Initialization”模块到窗口中。 编译程序。 打开电控箱电源。 连接程序。 运行程序。 双击“Scope”模块观察数据. 手动转动摆杆，观察显示结果，在数据超出显示范围时，点击缩放按键进行缩放。 记录实验结果。 记录Scope的结果如下图所示 实验二 电机控制实现 将运动控制器当前轴设定成速度控制模式，用户需要设定最大速度和加速度两个参数。在该模式下，开始运动时将以设定的加速度连续加速到设定的最大速度，运动方向由速度的符号确定，即正速度产生正向运动，而负速度产生负向运动。 新建\\(Simulink\\)项目，按照仿真设置当中将对各项参数进行设置。 打开“Googol Education Products-SV Block Library”。 拉“Set Current Axis’s Acc and Vel”模块到刚才新建的窗口中。 双击“SetAccVel”模块，打开如下窗口，参数设置如下： “Axis number”：选择轴号为“1”，即小车电机所使用的轴。 “Back velocity”：此参数设定小车限位后反方向运动的速度，单位为米/秒。 “Back position”：此参数设定小车限位后反方向运动，单位为脉冲数。 从“Simulink”中拉两个“Constant”到窗口中。 连接三个模块。 设置连接“Vel”的“Constant”模块值为0.2，连接“Vel”的“Constant”模块值为0.1。 在“Googol Education Products-SV Block Library”中拉一个“GT400-SV Initialization”模块到窗口中。 编译程序。 打开电控箱电源。 连接程序。 运行程序。 观察小车的运动情况。 小车运动情况如下 Your browser does not support the video tag. 实验结论 通过使用编码器，可以实现对摆杆角度的测量，可以将旋转角度这一模拟量转化为数字量并作为输入，进而参与控制器的实现。 通过使用电机，可以将数字控制量转化为模拟运动量，作为系统的输出，参与最终倒立摆的实现。","categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]},{"title":"倒立摆的建模仿真与控制（一）倒立摆系统的建模","slug":"倒立摆的建模仿真与控制（一）倒立摆系统的建模","date":"2022-10-12T06:59:00.000Z","updated":"2022-11-09T14:29:08.851Z","comments":true,"path":"posts/af245e93/","link":"","permalink":"https://paper-scallion.github.io/posts/af245e93/","excerpt":"对于倒立摆系统，由于其本身是自不稳定的系统，实验建模存在一定的困难。但是忽略掉一些次要的因素后，倒立摆系统就是一个典型的运动的刚体系统，可以在惯性坐标系内应用经典力学理论建立系统的动力学方程。","text":"对于倒立摆系统，由于其本身是自不稳定的系统，实验建模存在一定的困难。但是忽略掉一些次要的因素后，倒立摆系统就是一个典型的运动的刚体系统，可以在惯性坐标系内应用经典力学理论建立系统的动力学方程。 倒立摆系统的建模 可将倒立摆系统抽象成小车和匀质杆组成的系统， 如下图所示 其中 \\(M\\)：小车质量 \\(m\\)：摆杆质量 \\(b\\)：小车摩擦系数 \\(l\\)：摆杆转动轴心到杆质心的长度（当杆均匀时，长度为\\(2l\\)） \\(I\\)：摆杆转动惯量 \\(F\\)：加在小车上的力 \\(x\\)：小车位置 其中\\(\\phi\\)为摆杆与垂直向上方向的夹角，\\(\\theta\\)为摆杆与垂直向下方向的夹角（考虑到摆杆初始位置为竖直向下），有\\(\\theta=\\phi+\\pi\\)。 分析小车水平方向所受的合力，可以得到以下方程： \\[ M\\ddot x=F-b\\dot x-N \\tag{1} \\] 由摆杆水平方向所受的合力，可以得到以下方程： \\[ \\begin{align} N&amp;=m\\frac{d^2}{dt^2}(x+l\\sin\\theta)\\notag \\\\ &amp;=m\\ddot x+ml\\frac{d}{dt}(\\dot\\theta\\cos\\theta)\\notag \\\\ &amp;=m\\ddot x+ml\\ddot\\theta\\cos\\theta-ml\\dot\\theta^2\\sin\\theta\\tag{2} \\end{align} \\] 合并(1)(2)得： \\[ (M+m)\\ddot x+b\\dot x+ml(\\ddot\\theta\\cos\\theta-ml\\dot\\theta^2\\sin\\theta)=F\\tag{3} \\] 对摆杆垂直方向上的合力进行分析，可以得到以下方程： \\[ \\begin{align} P-mg&amp;=-m\\frac{d^2}{dt^2}(l\\cos\\theta)\\notag \\\\ &amp;=ml\\frac{d}{dt}(\\dot\\theta\\sin\\theta)\\notag \\\\ &amp;=ml\\ddot\\theta\\sin\\theta+ml\\dot\\theta^2\\cos\\theta\\tag{4} \\end{align} \\] 力矩平衡方程如下： \\[ \\begin{align} Pl\\sin\\phi+Nl\\cos\\phi&amp;=I\\ddot\\theta\\notag \\\\ -Pl\\sin\\theta-Nl\\cos\\theta&amp;=I\\ddot\\theta\\tag{5} \\end{align} \\] 联立(2)(4)(5)，消去\\(N\\)和\\(P\\)得： \\[ (I+ml^2)\\ddot\\theta+mgl\\sin\\theta=-ml\\ddot x\\cos\\theta\\tag{6} \\] 根据\\(\\phi\\)和\\(\\theta\\)定义知\\(\\theta=\\phi+\\pi\\)，当摆杆处于竖直位置时，\\(\\phi\\)接近于\\(0\\)，则有\\(\\cos\\theta=-\\cos\\phi\\approx-1\\)，\\(\\sin\\theta=-\\sin\\phi\\approx-\\phi\\)，\\(\\dot\\theta^2\\approx0\\)，\\(\\ddot\\theta=\\ddot\\phi\\)并使用\\(u\\)来代表输入力\\(F\\)，代入到(3)(6)，得线性化运动方程如下： \\[ \\begin{cases} (M+m)\\ddot x+b\\dot x-ml\\ddot\\phi=u \\\\ (I+ml^2)\\ddot\\phi-mgl\\phi=ml\\ddot x \\end{cases}\\tag{7} \\] 建立系统的状态空间模型 求解(7)，可得： \\[ \\begin{cases} \\dot x=\\dot x \\\\ \\ddot x=-\\frac{(I+ml^2)b}{p}\\dot x+\\frac{m^2gl^2}{p}\\phi+\\frac{I+ml^2}{p}u \\\\ \\dot\\phi=\\dot\\phi \\\\ \\ddot\\phi=-\\frac{mbl}{p}\\dot x+\\frac{mgl(M+m)}{p}\\phi+\\frac{ml}{p}u \\end{cases}\\tag{8} \\] 整理后得到系统状态空间方程： \\[ \\begin{bmatrix} \\dot x \\\\ \\ddot x \\\\ \\dot\\phi \\\\ \\ddot\\phi \\\\ \\end{bmatrix} = \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; -\\frac{(I+ml^2)b}{p} &amp; \\frac{m^2gl^2}{p} &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; -\\frac{mbl}{p} &amp; \\frac{mgl(M+m)}{p} &amp; 0\\\\ \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix} + \\begin{bmatrix} 0 \\\\ \\frac{I+ml^2}{p} \\\\ 0 \\\\ \\frac{ml}{p} \\\\ \\end{bmatrix} u\\tag{9} \\] 输出方程如下： \\[ y= \\begin{bmatrix} x \\\\ \\phi \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix}\\tag{10} \\] 其中\\(p=(M+m)I+Mml^2\\) 建立系统简化的状态空间模型 在理想情况下，摆杆转动惯量\\(I=\\frac{1}{3}ml^2\\)，摩擦系数\\(b=0\\)，小车质量\\(M\\)远大于摆杆质量\\(m\\)，即\\(M\\gg m\\)，代入到(9)(10)得到理想情况下的系统状态空间方程： \\[ \\begin{bmatrix} \\dot x \\\\ \\ddot x \\\\ \\dot\\phi \\\\ \\ddot\\phi \\\\ \\end{bmatrix} = \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; 0 &amp; \\frac{3g}{4l} &amp; 0\\\\ \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix} + \\begin{bmatrix} 0 \\\\ 1 \\\\ 0 \\\\ \\frac{3}{4l} \\\\ \\end{bmatrix} u\\tag{11} \\] 理想情况下的系统输出方程： \\[ y= \\begin{bmatrix} x \\\\ \\phi \\end{bmatrix} = \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ \\dot x \\\\ \\phi \\\\ \\dot\\phi \\\\ \\end{bmatrix}\\tag{12} \\] 建立系统传递函数模型 对(7)进行拉普拉斯变换得： \\[ \\begin{cases} (M+m)X(s)s^2+bX(s)s-ml\\Phi(s)s^2=U(s) \\\\ (I+ml^2)\\Phi(s)s^2-mgl\\Phi(s)=mlX(s)s^2 \\end{cases}\\tag{13} \\] 注：推导传递函数时假设初始条件为\\(0\\)。 整理(13)的第二个方程得： \\[ \\frac{\\Phi(s)}{X(s)}=\\frac{mls^2}{(I+ml^2)s^2-mgl}\\tag{14} \\] 如果令\\(v=\\ddot x\\)，则有： \\[ \\frac{\\Phi(s)}{V(s)}=\\frac{ml}{(I+ml^2)s^2-mgl}\\tag{15} \\] 将(14)代入(13)的第一个方程消去\\(X(s)\\)，整理得： \\[ \\frac{\\Phi(s)}{U(s)}=\\frac{\\frac{ml}{q}s}{s^3+\\frac{b(I+ml^2)}{q}s^2-\\frac{(M+m)mgl}{q}s-\\frac{bmgl}{q}}\\tag{16} \\] 将(16)代入(14)消去\\(\\Phi(s)\\)，整理得： \\[ \\frac{X(s)}{U(s)}=\\frac{\\frac{I+ml^2}{q}s^2-\\frac{mgl}{q}}{s^4+\\frac{b(I+ml^2)}{q}s^3-\\frac{(M+m)mgl}{q}s^2-\\frac{bmgl}{q}s}\\tag{17} \\] 其中\\(q=(M+m)(I+ml^2)-m^2l^2\\) 系统可控性分析 状态空间模型 \\[ A= \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; -\\frac{(I+ml^2)b}{p} &amp; \\frac{m^2gl^2}{p} &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; -\\frac{mbl}{p} &amp; \\frac{mgl(M+m)}{p} &amp; 0\\\\ \\end{bmatrix} , B= \\begin{bmatrix} 0 \\\\ \\frac{I+ml^2}{p} \\\\ 0 \\\\ \\frac{ml}{p} \\\\ \\end{bmatrix} , C= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\] 其中\\(p=(M+m)I+Mml^2\\) 将实际参数： \\(M=1.096kg\\) \\(m=0.109kg\\) \\(b=0.1N\\cdot s/m\\) \\(l=0.25m\\) \\(I=0.0034kg\\cdot m^2\\) 代入得： \\[ A= \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; -0.0883 &amp; 0.6293 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; -0.2357 &amp; 27.8285 &amp; 0\\\\ \\end{bmatrix} , B= \\begin{bmatrix} 0 \\\\ 0.8832 \\\\ 0 \\\\ 2.3566 \\\\ \\end{bmatrix} , C= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\] 计算得到可控性矩阵： \\[ S_1= \\begin{bmatrix} 0 &amp; 0.8832 &amp; -0.0780 &amp; 1.4899 \\\\ 0.8832 &amp; -0.0780 &amp; 1.4899 &amp; -0.2626 \\\\ 0 &amp; 2.3566 &amp; -0.2081 &amp; 65.5978\\\\ 2.3566 &amp; -0.2081 &amp; 65.5978 &amp; -6.1429\\\\ \\end{bmatrix} \\] 并且有\\(rank(S_1)=4\\)，故该系统完全可控。 计算得到可观测性矩阵： \\[ V_1= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 1 &amp; 0\\\\ 0 &amp; 1 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; -0.0883 &amp; 0.6293 &amp; 0\\\\ 0 &amp; -0.2357 &amp; 27.8285 &amp; 0\\\\ 0 &amp; 0.0078 &amp; -0.0556 &amp; 0.6293\\\\ 0 &amp; 0.0208 &amp; -0.1483 &amp; 27.8285 \\end{bmatrix} \\] 并且有\\(rank(V_1)=4\\)，故该系统完全可观测。 \\(MATLAB\\)代码如下： 12345678910111213M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;p=I*(M+m)+M*m*l^2;A=[0 1 0 0;0 -(I+m*l^2)*b/p m^2*g*l^2/p 0;0 0 0 1;0 -m*b*l/p m*g*l*(M+m)/p 0];B=[0;(I+m*l^2)/p;0;m*l/p];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);S1 = ctrb(A,B);rS1 = rank(S1);V1 = obsv(A,C);rV1 = rank(V1); 简化的状态空间模型 \\[ A= \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; 0 &amp; \\frac{3g}{4l} &amp; 0\\\\ \\end{bmatrix} , B= \\begin{bmatrix} 0 \\\\ 1 \\\\ 0 \\\\ \\frac{3}{4l} \\\\ \\end{bmatrix} , C= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\] 将实际参数代入得： \\[ A= \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; 0 &amp; 29.4 &amp; 0\\\\ \\end{bmatrix} , B= \\begin{bmatrix} 0 \\\\ 1 \\\\ 0 \\\\ 3 \\\\ \\end{bmatrix} , C= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 0 &amp; 1 &amp; 0 \\end{bmatrix} \\] 计算得到可控性矩阵： \\[ S_2= \\begin{bmatrix} 0 &amp; 1 &amp; 0 &amp; 0 \\\\ 1 &amp; 0 &amp; 0 &amp; 0 \\\\ 0 &amp; 3 &amp; 0 &amp; 88.2\\\\ 3 &amp; 0 &amp; 88.2 &amp; 0\\\\ \\end{bmatrix} \\] 并且有\\(rank(S_2)=4\\)，故该系统完全可控。 计算得到可观测性矩阵： \\[ V_1= \\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 1 &amp; 0\\\\ 0 &amp; 1 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 0 &amp; 1\\\\ 0 &amp; 0 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 29.4 &amp; 0\\\\ 0 &amp; 0 &amp; 0 &amp; 0\\\\ 0 &amp; 0 &amp; 0 &amp; 29.4 \\end{bmatrix} \\] 并且有\\(rank(V_2)=4\\)，故该系统完全可观测。 \\(MATLAB\\)代码如下： 123456789101112M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;A=[0 1 0 0;0 0 0 0;0 0 0 1;0 0 3*g/(4*l) 0];B=[0;1;0;3/(4*l)];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);S2 = ctrb(A,B);rS2 = rank(S2);V2 = obsv(A,C);rV2 = rank(V2); 开环系统在典型信号作用下的响应 系统的状态空间模型 单位阶跃响应 系统的单位阶跃响应如下图所示： \\(MATLAB\\)代码如下： 12345678910111213141516M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;T=0.001;p=I*(M+m)+M*m*l^2;A=[0 1 0 0;0 -(I+m*l^2)*b/p m^2*g*l^2/p 0;0 0 0 1;0 -m*b*l/p m*g*l*(M+m)/p 0];B=[0;(I+m*l^2)/p;0;m*l/p];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);t=0:T:5;y=step(sys,t);figureplot(t,y(:,1),t,y(:,2),&#x27;r&#x27;);axis([0 2 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;);title(&#x27;通过状态方程求系统的开环阶跃响应&#x27;); 单位冲激响应 系统的单位冲激响应如下图所示： \\(MATLAB\\)代码如下： 12345678910111213141516M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;p=I*(M+m)+M*m*l^2;A=[0 1 0 0;0 -(I+m*l^2)*b/p m^2*g*l^2/p 0;0 0 0 1;0 -m*b*l/p m*g*l*(M+m)/p 0];B=[0;(I+m*l^2)/p;0;m*l/p];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);t=0:T:5;y=impulse(sys,t);figureplot(t,y(:,1),t,y(:,2),&#x27;r&#x27;);axis([0 2 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;);title(&#x27;通过状态方程求系统的开环冲激响应&#x27;); 系统简化的状态空间模型 单位阶跃响应 系统的单位阶跃响应如下图所示： \\(MATLAB\\)代码如下： 123456789101112131415l=0.25;g=9.8;T=0.001;A=[0 1 0 0;0 0 0 0;0 0 0 1;0 0 3*g/(4*l) 0];B=[0;1;0;3/(4*l)];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);t=0:T:5;y=step(sys,t);figureplot(t,y(:,1),t,y(:,2),&#x27;r&#x27;);axis([0 2 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;);title(&#x27;通过状态方程求系统的开环阶跃响应&#x27;); 单位冲激响应 系统的单位冲激响应如下图所示： \\(MATLAB\\)代码如下： 123456789101112131415l=0.25;g=9.8;T=0.001;A=[0 1 0 0;0 0 0 0;0 0 0 1;0 0 3*g/(4*l) 0];B=[0;1;0;3/(4*l)];C=[1 0 0 0;0 0 1 0];D=0;sys=ss(A,B,C,D);t=0:T:5;y=impulse(sys,t);figureplot(t,y(:,1),t,y(:,2),&#x27;r&#x27;);axis([0 2 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;);title(&#x27;通过状态方程求系统的开环冲激响应&#x27;); 系统的传递函数模型 单位阶跃响应 系统的单位阶跃响应如下图所示： \\(MATLAB\\)代码如下： 12345678910111213141516171819M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;T=0.001;q=(M+m)*(I+m*l^2)-(m*l)^2;num=[m*l/q 0];den=[1 b*(I+m*l^2)/q -(M+m)*m*g*l/q -b*m*g*l/q];gs=tf(num,den);numpo=[(I+m*l^2)/q 0 -m*g*l/q];denpo=[1 b*(I+m*l^2)/q -(M+m)*m*g*l/q -b*m*g*l/q 0];gspo=tf(numpo,denpo);t=0:T:5;y1=step(gs,t);y2=step(gspo,t);figureplot(t,y2,&#x27;b&#x27;,t,y1,&#x27;r&#x27;);axis([0 2.5 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;)title(&#x27;通过传递函数求系统的开环阶跃响应&#x27;); 单位冲激响应 系统的单位冲激响应如下图所示： \\(MATLAB\\)代码如下： 12345678910111213141516171819M=1.096;m=0.109;b=0.1;l=0.25;I=0.0034;g=9.8;T=0.001;q=(M+m)*(I+m*l^2)-(m*l)^2;num=[m*l/q 0];den=[1 b*(I+m*l^2)/q -(M+m)*m*g*l/q -b*m*g*l/q];gs=tf(num,den);numpo=[(I+m*l^2)/q 0 -m*g*l/q];denpo=[1 b*(I+m*l^2)/q -(M+m)*m*g*l/q -b*m*g*l/q 0];gspo=tf(numpo,denpo);t=0:T:5;y1=impulse(gs,t);y2=impulse(gspo,t);figureplot(t,y2,&#x27;b&#x27;,t,y1,&#x27;r&#x27;);axis([0 2.5 0 80]);legend(&#x27;Car Position&#x27;,&#x27;Pendulum Angle&#x27;)title(&#x27;通过传递函数求系统的开环阶跃响应&#x27;); 结论 通过对系统进行建模并进行理论分析和仿真可知，倒立摆系统在开环状态下不稳定，无法自行平衡，因此需要设计合适的控制器来对倒立摆系统进行控制，以达到期望的稳定控制效果。","categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]}],"categories":[{"name":"课程实验","slug":"课程实验","permalink":"https://paper-scallion.github.io/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/"}],"tags":[{"name":"自动控制原理","slug":"自动控制原理","permalink":"https://paper-scallion.github.io/tags/%E8%87%AA%E5%8A%A8%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86/"}]}